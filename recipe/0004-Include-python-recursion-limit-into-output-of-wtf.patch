From 47c010dfcb4d8ca4827ef13dddb6434388af45c7 Mon Sep 17 00:00:00 2001
From: Yaroslav Halchenko <debian@onerussian.com>
Date: Wed, 1 Nov 2017 21:38:36 -0400
Subject: [PATCH 4/4] Include python recursion limit into output of wtf

---
 mvpa2/base/info.py | 12 ++++++++----
 1 file changed, 8 insertions(+), 4 deletions(-)

diff --git a/mvpa2/base/info.py b/mvpa2/base/info.py
index 61b53f6e..57889be0 100644
--- a/mvpa2/base/info.py
+++ b/mvpa2/base/info.py
@@ -192,10 +192,13 @@ class WTF(object):
     def _acquire_runtime(self, out):
         out.write("RUNTIME:\n")
         out.write(" PyMVPA Environment Variables:\n")
-        out.write('  ' + '  '.join(
-            ['%-20s: "%s"\n' % (str(k), str(v))
-             for k, v in os.environ.iteritems()
-             if (k.startswith('MVPA') or k.startswith('PYTHON'))]))
+        pymvpa_envvars = '  '.join([
+            '%-20s: "%s"\n' % (str(k), str(v))
+            for k, v in os.environ.iteritems()
+            if (k.startswith('MVPA') or k.startswith('PYTHON'))
+        ])
+        if pymvpa_envvars:
+            out.write('  ' + pymvpa_envvars)
 
         out.write(" PyMVPA Runtime Configuration:\n")
         out.write('  ' + str(cfg).replace('\n', '\n  ').rstrip() + '\n')
@@ -203,6 +206,7 @@ class WTF(object):
     def _acquire_process(self, out):
         try:
             procstat = open('/proc/%d/status' % os.getpid()).readlines()
+            procstat += ['Python recursion limit: %d' % sys.getrecursionlimit()]
             out.write(' Process Information:\n')
             out.write('  ' + '  '.join(procstat))
         except:
-- 
2.14.1

